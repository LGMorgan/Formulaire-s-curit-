(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[605],{4061:function(e,r,t){"use strict";var n=t(1428);r.Z=(0,n.buildRpcClient)({resolverName:"logout",resolverType:"mutation",routePath:"/api/rpc/logout"})},5429:function(e,r,t){"use strict";t.d(r,{_Y:function(){return n}});var n={OK:"OK",TEXT:"TEXT",NUMBER:"NUMBER",CLOSED:"CLOSED"}},3874:function(e,r,t){"use strict";var n=t(6065),o=(t(2540),t(1428)),a=t(9527),i=t(4061),s=t(5893),l=function(e){var r=e.title,t=e.children,l=(0,o.useMutation)(i.Z);(0,n.Z)(l,1)[0];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(a.Head,{children:[(0,s.jsx)("title",{children:r||"classemini"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),t]})};l.authenticate={redirectTo:"/"},r.Z=l},6843:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return gr}});var n=t(6065),o=t(2540),a=t(1428),i=t(3874),s=t(6586);var l=t(6988);function c(e){return function(e){if(Array.isArray(e))return(0,s.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||(0,l.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u=t(7294),d=t(809),f=t.n(d),p=t(266),g=t(4548),m=t.n(g),h=t(5893),b=function(e){var r=e.children,t=u.Children.map(r,(function(e){return(0,u.isValidElement)(e)?(0,u.cloneElement)(e):e}));return(0,h.jsx)("footer",{className:m().footer,children:t})},v=t(2068);var y=t(8970),x=t(327),w=t(9983),j=Object.defineProperty,S=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable,k=(e,r,t)=>r in e?j(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var N=t(8914),C=Object.defineProperty,E=Object.defineProperties,_=Object.getOwnPropertyDescriptors,P=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,q=(e,r,t)=>r in e?C(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,D=(e,r)=>{for(var t in r||(r={}))T.call(r,t)&&q(e,t,r[t]);if(P)for(var t of P(r))I.call(r,t)&&q(e,t,r[t]);return e},M=(e,r)=>E(e,_(r));const R={xs:12,sm:16,md:20,lg:24,xl:36};var Z=(0,N.k)(((e,{size:r,color:t,transitionDuration:n},o)=>{const a={ref:o("labelDisabled")},i=e.fn.variant({variant:"filled",color:t});return{labelDisabled:a,radioWrapper:{display:"flex",alignItems:"center",WebkitTapHighlightColor:"transparent"},inner:{position:"relative"},icon:{ref:o("icon"),color:e.white,opacity:0,transform:"scale(0.75) translateY(2px)",transition:`opacity ${n}ms ${e.transitionTimingFunction}`,pointerEvents:"none",width:e.fn.size({sizes:R,size:r})/2,height:e.fn.size({sizes:R,size:r})/2,position:"absolute",top:`calc(50% - ${e.fn.size({sizes:R,size:r})/4}px)`,left:`calc(50% - ${e.fn.size({sizes:R,size:r})/4}px)`},radio:M(D({},e.fn.focusStyles()),{backgroundColor:"dark"===e.colorScheme?e.colors.dark[4]:e.white,border:`1px solid ${"dark"===e.colorScheme?e.colors.dark[4]:e.colors.gray[4]}`,position:"relative",appearance:"none",width:e.fn.size({sizes:R,size:r}),height:e.fn.size({sizes:R,size:r}),borderRadius:e.fn.size({sizes:R,size:r}),margin:0,display:"flex",alignItems:"center",justifyContent:"center",transitionProperty:"background-color, border-color",transitionTimingFunction:e.transitionTimingFunction,transitionDuration:`${n}ms`,"&:checked":{background:i.background,borderColor:i.background,[`& + .${o("icon")}`]:{opacity:1,transform:"scale(1)"}},"&:disabled":{borderColor:"dark"===e.colorScheme?e.colors.dark[5]:e.colors.gray[4],backgroundColor:"dark"===e.colorScheme?e.colors.dark[5]:e.colors.gray[1],[`& + .${o("icon")}`]:{color:"dark"===e.colorScheme?e.colors.dark[6]:e.colors.gray[4]}}}),label:M(D({},e.fn.fontStyles()),{display:"flex",alignItems:"flex-start",fontSize:e.fontSizes[r]||e.fontSizes.md,lineHeight:`${e.fn.size({sizes:R,size:r})}px`,color:"dark"===e.colorScheme?e.colors.dark[0]:e.black,marginLeft:e.spacing.sm,[`&.${a.ref}`]:{color:"dark"===e.colorScheme?e.colors.dark[3]:e.colors.gray[5]}})}})),A=t(1080),$=Object.defineProperty,L=Object.getOwnPropertySymbols,B=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable,V=(e,r,t)=>r in e?$(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,W=(e,r)=>{for(var t in r||(r={}))B.call(r,t)&&V(e,t,r[t]);if(L)for(var t of L(r))F.call(r,t)&&V(e,t,r[t]);return e};const G={__staticSelector:"Radio",icon:function(e){return u.createElement("svg",((e,r)=>{for(var t in r||(r={}))O.call(r,t)&&k(e,t,r[t]);if(S)for(var t of S(r))z.call(r,t)&&k(e,t,r[t]);return e})({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5"},e),u.createElement("path",{fill:"currentColor",d:"M0 2.5a2.5 2.5 0 115 0 2.5 2.5 0 01-5 0z"}))},transitionDuration:100},Y=(0,u.forwardRef)(((e,r)=>{const t=(0,y.Z3)("Radio",G,e),{className:n,style:o,id:a,label:i,size:s,title:l,disabled:c,color:d,classNames:f,styles:p,__staticSelector:g,sx:m,icon:h,transitionDuration:b}=t,x=((e,r)=>{var t={};for(var n in e)B.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&L)for(var n of L(e))r.indexOf(n)<0&&F.call(e,n)&&(t[n]=e[n]);return t})(t,["className","style","id","label","size","title","disabled","color","classNames","styles","__staticSelector","sx","icon","transitionDuration"]),{classes:j,cx:S}=Z({color:d,size:s,transitionDuration:b},{classNames:f,styles:p,name:g}),{systemStyles:O,rest:z}=(0,w.x)(x),k=(0,v.q)(a);return u.createElement(A.x,W({className:S(j.radioWrapper,n),style:o,title:l,sx:m},O),u.createElement("div",{className:j.inner},u.createElement("input",W({ref:r,className:j.radio,type:"radio",id:k,disabled:c},z)),u.createElement(h,{className:j.icon,"aria-hidden":!0})),i&&u.createElement("label",{className:S(j.label,{[j.labelDisabled]:c}),htmlFor:k},i))}));Y.displayName="@mantine/core/Radio";const H={left:"flex-start",center:"center",right:"flex-end",apart:"space-between"};var K=(0,N.k)(((e,{spacing:r,position:t,noWrap:n,direction:o,grow:a,align:i,count:s})=>({root:{boxSizing:"border-box",display:"flex",flexDirection:o,alignItems:i||("row"===o?"center":a?"stretch":"apart"===t?"flex-start":H[t]),flexWrap:n?"nowrap":"wrap",justifyContent:"row"===o?H[t]:void 0,gap:e.fn.size({size:r,sizes:e.spacing})},child:{boxSizing:"border-box",maxWidth:a&&"row"===o?`calc(${100/s}% - ${e.fn.size({size:r,sizes:e.spacing})-e.fn.size({size:r,sizes:e.spacing})/s}px)`:void 0,flexGrow:a?1:0}})));var X=Object.defineProperty,U=Object.getOwnPropertySymbols,Q=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable,ee=(e,r,t)=>r in e?X(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;const re={position:"left",spacing:"md",direction:"row"},te=(0,u.forwardRef)(((e,r)=>{const t=(0,y.Z3)("Group",re,e),{className:n,position:o,align:a,children:i,noWrap:s,grow:l,spacing:c,direction:d,classNames:f,styles:p}=t,g=((e,r)=>{var t={};for(var n in e)Q.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&U)for(var n of U(e))r.indexOf(n)<0&&J.call(e,n)&&(t[n]=e[n]);return t})(t,["className","position","align","children","noWrap","grow","spacing","direction","classNames","styles"]),m=function(e){return u.Children.toArray(e).filter(Boolean)}(i),{classes:h,cx:b}=K({align:a,grow:l,noWrap:s,spacing:c,position:o,direction:d,count:m.length},{classNames:f,styles:p,name:"Group"}),v=m.map((e=>{var r;return"object"===typeof e&&null!==e&&"props"in e?u.cloneElement(e,{className:b(h.child,null==(r=e.props)?void 0:r.className)}):e}));return u.createElement(A.x,((e,r)=>{for(var t in r||(r={}))Q.call(r,t)&&ee(e,t,r[t]);if(U)for(var t of U(r))J.call(r,t)&&ee(e,t,r[t]);return e})({className:b(h.root,n),ref:r},g),v)}));te.displayName="@mantine/core/Group";var ne=Object.defineProperty,oe=Object.getOwnPropertySymbols,ae=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable,se=(e,r,t)=>r in e?ne(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,le=(e,r)=>{for(var t in r||(r={}))ae.call(r,t)&&se(e,t,r[t]);if(oe)for(var t of oe(r))ie.call(r,t)&&se(e,t,r[t]);return e};const ce={orientation:"horizontal",spacing:"sm"},ue=(0,u.forwardRef)(((e,r)=>{const t=(0,y.Z3)("RadioGroup",ce,e),{id:n,name:o,children:a,value:i,defaultValue:s,onChange:l,orientation:c,spacing:d,color:f,size:p,classNames:g,styles:m,wrapperProps:h,errorProps:b,labelProps:w,descriptionProps:j}=t,S=((e,r)=>{var t={};for(var n in e)ae.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&oe)for(var n of oe(e))r.indexOf(n)<0&&ie.call(e,n)&&(t[n]=e[n]);return t})(t,["id","name","children","value","defaultValue","onChange","orientation","spacing","color","size","classNames","styles","wrapperProps","errorProps","labelProps","descriptionProps"]),O=(0,v.q)(n),z=(0,v.q)(o),[k,N]=function({value:e,defaultValue:r,finalValue:t,rule:n,onChange:o,onValueUpdate:a}){const i=n(e),s=(0,u.useRef)("initial"),l=n(r)?r:t,[c,d]=(0,u.useState)(l);let f=i?e:c;i||"controlled"!==s.current||(f=t),s.current=i?"controlled":"uncontrolled";const p=s.current;return(0,u.useEffect)((()=>{"uncontrolled"===p&&d(f),"function"===typeof a&&a(f)}),[p,f]),[f,e=>{"function"===typeof o&&o(e),"uncontrolled"===p&&d(e)},s.current]}({value:i,defaultValue:s,finalValue:"",onChange:l,rule:e=>"string"===typeof e}),C=function(e,r){return u.Children.toArray(e).filter((e=>Array.isArray(r)?r.some((r=>r===e.type)):e.type===r))}(a,Y).map(((e,r)=>(0,u.cloneElement)(e,{key:r,checked:k===e.props.value,name:z,color:f,size:p,classNames:g,styles:m,__staticSelector:"RadioGroup",onChange:e=>N(e.currentTarget.value)})));return u.createElement(x.S,le(le({id:O,labelElement:"div",size:p,__staticSelector:"RadioGroup",classNames:g,styles:m,ref:r,errorProps:b,descriptionProps:j,labelProps:w},h),S),u.createElement(te,{role:"radiogroup","aria-labelledby":`${O}-label`,spacing:d,direction:"horizontal"===c?"row":"column",style:{paddingTop:5}},C))}));ue.displayName="@mantine/core/RadioGroup";var de=Object.defineProperty,fe=Object.getOwnPropertySymbols,pe=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable,me=(e,r,t)=>r in e?de(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,he=(e,r)=>{for(var t in r||(r={}))pe.call(r,t)&&me(e,t,r[t]);if(fe)for(var t of fe(r))ge.call(r,t)&&me(e,t,r[t]);return e};var be=Object.defineProperty,ve=Object.defineProperties,ye=Object.getOwnPropertyDescriptors,xe=Object.getOwnPropertySymbols,we=Object.prototype.hasOwnProperty,je=Object.prototype.propertyIsEnumerable,Se=(e,r,t)=>r in e?be(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,Oe=(e,r)=>{for(var t in r||(r={}))we.call(r,t)&&Se(e,t,r[t]);if(xe)for(var t of xe(r))je.call(r,t)&&Se(e,t,r[t]);return e},ze=(e,r)=>ve(e,ye(r));const ke={xs:16,sm:20,md:24,lg:30,xl:36},Ne={xs:8,sm:10,md:14,lg:16,xl:20};var Ce=(0,N.k)(((e,{size:r,radius:t,color:n,transitionDuration:o},a)=>{const i=e.fn.size({size:r,sizes:ke}),s=e.fn.variant({variant:"filled",color:n});return{icon:{ref:a("icon"),color:e.white,transform:"translateY(5px) scale(0.5)",opacity:0,transitionProperty:"opacity, transform",transitionTimingFunction:"ease",transitionDuration:`${o}ms`,pointerEvents:"none",width:e.fn.size({size:r,sizes:Ne}),position:"absolute",zIndex:1,top:0,bottom:0,left:0,right:0,margin:"auto","@media (prefers-reduced-motion)":{transitionDuration:"0ms"}},root:{display:"flex",alignItems:"center"},inner:{position:"relative",width:i,height:i},label:ze(Oe({},e.fn.fontStyles()),{WebkitTapHighlightColor:"transparent",paddingLeft:e.spacing.sm,fontSize:e.fn.size({size:r,sizes:e.fontSizes}),lineHeight:`${i}px`,color:"dark"===e.colorScheme?e.colors.dark[0]:e.black}),input:ze(Oe({},e.fn.focusStyles()),{appearance:"none",backgroundColor:"dark"===e.colorScheme?e.colors.dark[4]:e.white,border:`1px solid ${"dark"===e.colorScheme?e.colors.dark[4]:e.colors.gray[4]}`,width:i,height:i,borderRadius:e.fn.radius(t),padding:0,display:"block",margin:0,transition:`border-color ${o}ms ease, background-color ${o}ms ease`,"&:checked":{backgroundColor:s.background,borderColor:s.background,[`& + .${a("icon")}`]:{opacity:1,transform:"translateY(0) scale(1)"}},"&:disabled":{backgroundColor:"dark"===e.colorScheme?e.colors.dark[4]:e.colors.gray[2],borderColor:"dark"===e.colorScheme?e.colors.dark[6]:e.colors.gray[3],cursor:"not-allowed",[`& + .${a("icon")}`]:{color:"dark"===e.colorScheme?e.colors.dark[6]:e.colors.gray[5]}}})}})),Ee=Object.defineProperty,_e=Object.getOwnPropertySymbols,Pe=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable,Ie=(e,r,t)=>r in e?Ee(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,qe=(e,r)=>{for(var t in r||(r={}))Pe.call(r,t)&&Ie(e,t,r[t]);if(_e)for(var t of _e(r))Te.call(r,t)&&Ie(e,t,r[t]);return e};const De={size:"sm",__staticSelector:"Checkbox",transitionDuration:100,icon:function(e){var r=e,{indeterminate:t}=r,n=((e,r)=>{var t={};for(var n in e)pe.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&fe)for(var n of fe(e))r.indexOf(n)<0&&ge.call(e,n)&&(t[n]=e[n]);return t})(r,["indeterminate"]);return t?u.createElement("svg",he({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6"},n),u.createElement("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})):u.createElement("svg",he({viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),u.createElement("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}},Me=(0,u.forwardRef)(((e,r)=>{const t=(0,y.Z3)("Checkbox",De,e),{className:n,style:o,sx:a,checked:i,color:s,label:l,indeterminate:c,id:d,size:f,radius:p,wrapperProps:g,children:m,classNames:h,styles:b,transitionDuration:x,icon:j,__staticSelector:S}=t,O=((e,r)=>{var t={};for(var n in e)Pe.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&_e)for(var n of _e(e))r.indexOf(n)<0&&Te.call(e,n)&&(t[n]=e[n]);return t})(t,["className","style","sx","checked","color","label","indeterminate","id","size","radius","wrapperProps","children","classNames","styles","transitionDuration","icon","__staticSelector"]),z=(0,v.q)(d),{systemStyles:k,rest:N}=(0,w.x)(O),{classes:C,cx:E}=Ce({size:f,radius:p,color:s,transitionDuration:x},{classNames:h,styles:b,name:S});return u.createElement(A.x,qe(qe({className:E(C.root,n),style:o,sx:a},k),g),u.createElement("div",{className:C.inner},u.createElement("input",qe({id:z,ref:r,type:"checkbox",className:C.input,checked:c||i},N)),u.createElement(j,{indeterminate:c,className:C.icon})),l&&u.createElement("label",{className:C.label,htmlFor:z},l))}));Me.displayName="@mantine/core/Checkbox";var Re=t(3591),Ze=t(8827),Ae=t(5429);function $e(e){var r=e.question,t=e.onChange;return 0===r.get("expectedAnswers").size&&r.set("expectedAnswers",new Map([[0,new Map([["fr","Oui"],["en","Yes"]])],[1,new Map([["fr","Non"],["en","No"]])]])),(0,h.jsx)("div",{children:(0,h.jsx)(ue,{value:r.get("answer"),spacing:"xl",style:{display:"flex",justifyContent:"flex-end"},onChange:function(e){t({id:void 0!=r.get("anchor")?r.get("anchor"):r.get("id"),answer:e})},children:c(r.get("expectedAnswers")).map((function(e,r){var t=(0,h.jsxs)("p",{children:[e[1].get("fr")," ",e[1].get("en")?(0,h.jsxs)("span",{children:[" / ",e[1].get("en")]}):""]});return(0,h.jsx)(Y,{value:e[1].get("fr"),label:t},r)}))})})}var Le=function(e){var r=e.question,t=e.onChange;return(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{children:r.get("text")}),(void 0===r.get("answerType")||r.get("answerType")===Ae._Y.OK)&&(0,h.jsx)(Me,{checked:!!r.get("answer"),size:"md",style:{display:"flex",justifyContent:"flex-end"},onChange:function(e){return t({id:void 0!=r.get("anchor")?r.get("anchor"):r.get("id"),answer:e.target.checked})}}),r.get("answerType")===Ae._Y.TEXT&&(0,h.jsx)(Re.o,{placeholder:r.get("placeholder"),value:r.get("answer"),onChange:function(e){return t({id:void 0!=r.get("anchor")?r.get("anchor"):r.get("id"),answer:e.target.value})}}),r.get("answerType")===Ae._Y.NUMBER&&(0,h.jsx)(Ze.Y,{disabled:r.get("disabled"),onChange:function(e){console.log({value:e}),t({id:void 0!=r.get("anchor")?r.get("anchor"):r.get("id"),answer:e})},value:r.get("answer"),hideControls:!0}),r.get("answerType")===Ae._Y.CLOSED&&(0,h.jsx)($e,{question:r,onChange:function(e){console.log({value:e}),t(e)}})]})},Be=t(3413),Fe=t(4065),Ve=t(3991),We=t(5093),Ge=t.n(We),Ye=function(e){var r=e.questions,t=void 0===r?[]:r,n=e.page,o=e.lastPage,a=e.changePage,i=e.save,s=e.saveState,l=e.openDrawer,d=e.sectionTitle,f=void 0===d?"Section sans titre":d,p=(0,Fe.a)("(max-width: 650px)"),g=(0,u.useState)(new Map),m=g[0],v=g[1];(0,u.useEffect)((function(){console.log({questions:t}),v(t)}),[t]);return console.log({questionsState:m}),(0,h.jsxs)("div",{className:Ge().container,children:[(0,h.jsxs)("div",{className:Ge().content,children:[(0,h.jsx)("p",{className:Ge().sectionTitle,children:f}),(0,h.jsx)("div",{className:Ge().contentList,children:(0,h.jsx)("ul",{children:c(m).map((function(e,r){return(0,h.jsx)("li",{children:(0,h.jsx)(Le,{index:r,question:e[1],onChange:function(e){return function(e){console.log({value:e});var r=new Map(m),t=r.get(e.id);t.set("answer",e.answer),r.set(e.id,t),v(r),s(r)}(e)}})},e[1].get("id"))}))})})]}),(0,h.jsxs)(b,{children:[(0,h.jsxs)("div",{className:Ge().arrowCorner,children:[(0,h.jsx)(Be.z,{disabled:0===n,onClick:function(){return a(-1,m)},children:(0,h.jsx)("span",{children:"<"})}),(0,h.jsx)(Be.z,{disabled:n==o,onClick:function(){return a(1,m)},children:">"})]}),(0,h.jsx)(Be.z,{onClick:function(){return i(m)},children:p?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(Ve.e11,{size:18})," & ",(0,h.jsx)(Ve.y_Z,{size:18})]}):"Enregistrer et quitter"}),(0,h.jsx)(Be.z,{onClick:function(){return l()},children:p?(0,h.jsx)(Ve._AG,{size:18}):"Vue d'ensemble"})]})]})},He=t(1396),Ke=t.n(He),Xe=function(e){var r=e.sections,t=e.page,n=e.goToPage,o=(0,u.useState)([]),a=o[0],i=o[1];return(0,u.useEffect)((function(){var e=[];r.forEach((function(r){var t=r.get("question"),n=t.size,o=0;t.forEach((function(e){e.get("answer")&&o++})),e.push({name:r.get("name"),answers:o,questionSize:n,index:r.get("index")}),i(e)}))}),[r,t]),(0,h.jsx)("div",{className:Ke().div,children:r&&a.map((function(e,r){return(0,h.jsxs)("button",{className:Ke().sectionButton,onClick:function(){return n(e.index)},children:[(0,h.jsx)("span",{children:e.name}),(0,h.jsxs)("span",{children:[e.answers," / ",e.questionSize]})]},r)}))})},Ue=t(1642),Qe=t(5388),Je=t(4403),er=t(9483),rr=t(4922);function tr(e,r){return r instanceof Map?{dataType:"Map",value:Array.from(r.entries())}:r}var nr=function(e){var r=e.sections,t=e.editing,i=(0,u.useState)(r),s=i[0],l=i[1],c=(0,a.useMutation)(Qe.Z),d=(0,n.Z)(c,1)[0],g=(0,a.useMutation)(Je.Z),m=(0,n.Z)(g,1)[0],b=(0,u.useState)(!1),v=b[0],y=b[1],x=(0,u.useState)(0),w=x[0],j=x[1],S=(0,o.useRouter)();(0,u.useEffect)((function(){l(r)}),[r]);var O=function(e){var r=s;r.get(w).set("question",e),l(r)};console.log("SectionManager rendered",{formState:s});var z=function(){var e=(0,p.Z)(f().mark((function e(r){var n,o,a,i,l,c,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=s).get(w).set("question",r),o=0,a=0,n.forEach((function(e){e.get("question").forEach((function(e){o++,("CHECK"===e.get("answerType")&&!0===e.get("answer")||"CHECK"!==e.get("answerType")&&void 0!=e.get("answer")&&0!=e.get("answer").length)&&a++}))})),console.log("".concat(a," answers for ").concat(o," questions in "),{state:n}),n.forEach((function(e){e.get("question").forEach((function(e){e.get("answer")&&console.log(e.get("answer"))}))})),console.log("STATE PRE-JSON",{state:n}),i=JSON.stringify(n,tr),l=a===o,c={boatId:n.get(0).get("question").get("boatId").get("answer"),skipperName:n.get(2).get("question").get("skipperName").get("answer"),boatType:n.get(0).get("question").get("boatType").get("answer"),form:i,completed:l},console.log({values:c}),!navigator.onLine){e.next=32;break}if(e.prev=13,!0!==t){e.next=20;break}return e.next=17,m(c);case 17:e.t0=e.sent,e.next=23;break;case 20:return e.next=22,d(c);case 22:e.t0=e.sent;case 23:u=e.t0,console.log({sheet:u}),e.next=30;break;case 27:e.prev=27,e.t1=e.catch(13),console.log({error:e.t1});case 30:e.next=33;break;case 32:er.setItem(c.boatId,c).then((function(e){console.log({e:e}),(0,rr.c0)({title:"Formulaire sauv\xe9 localement",message:"Connectez-vous \xe0 internet pour l'envoyer sur les serveurs"})}));case 33:S.replace("/Dashboard");case 34:case"end":return e.stop()}}),e,null,[[13,27]])})));return function(r){return e.apply(this,arguments)}}();return(0,h.jsxs)("div",{children:[(0,h.jsx)(Ue.d,{position:"right",opened:v,onClose:function(){return y(!1)},title:"Vue d'ensemble",padding:"xl",size:"md",overlayOpacity:.55,overlayBlur:3,children:(0,h.jsx)(Xe,{sections:s,goToPage:function(e){return function(e){y(!1),j(e)}(e)},page:w})}),s.get(w)&&(0,h.jsx)(Ye,{sectionTitle:s.get(w)&&s.get(w).get("name"),questions:s.get(w).get("question"),page:w,saveState:function(e){return O(e)},save:function(e){return z(e)},lastPage:s.size-1,changePage:function(e,r){return function(e,r){O(r),j(w+e)}(e,r)},openDrawer:function(){return y(!v)}})]})};function or(e,r){var t;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"===typeof e)return ar(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ar(e,r)}(e))||r&&e&&"number"===typeof e.length){t&&(e=t);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==t.return||t.return()}finally{if(s)throw a}}}}function ar(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function ir(e,r){return"object"===typeof r&&null!==r&&"Map"===r.dataType?new Map(r.value):r}function sr(e){for(var r=new Map,t=0,n=Object.keys(e);t<n.length;t++){var o=n[t];if(e[o]instanceof Object&&!(e[o]instanceof Date)){var a=void 0!=e[o].anchor?e[o].anchor:void 0!=e[o].id?e[o].id:isNaN(o)?o:parseInt(o);console.log(isNaN(o),o,a,e[o]),r.set(a,sr(e[o]))}else r.set(o,e[o])}return r}var lr=function(e){var r=e.sections,t=e.sheet,o=e.edit,a=void 0===o||o,i=e.boatId;console.log({fromSectionData:{sections:r,sheet:t,edit:a,boatId:i}});var s=(0,u.useState)(new Map),l=s[0],d=s[1];return(0,u.useEffect)((function(){var e=a?JSON.parse(t.form,ir):new Map,o=new Map;r.forEach((function(e){var r=sr(e);console.log({m:r}),o.set(e.index,r)})),console.log({sectionsMap:o});var s,l=or(o.entries());try{for(l.s();!(s=l.n()).done;){var u=(0,n.Z)(s.value,2),f=u[0],p=u[1];console.log(f+" = "+p)}}catch(m){l.e(m)}finally{l.f()}o.get(0).get("question").get("boatId").set("answer",parseInt(i));var g=new Map([].concat(c(o),c(e)));d(g)}),[]),console.log({map:l,sheet:t}),(0,h.jsx)("div",{children:(0,h.jsxs)(u.Suspense,{fallback:(0,h.jsx)("p",{children:"Chargement..."}),children:[(0,h.jsx)(nr,{editing:a,sections:l}),"Section Data"]})})},cr=t(5427),ur=t(9977),dr=function(e){var r=e.sections,t=e.boatId,o=function(e){var r=(0,a.useQuery)(ur.Z,{boatId:parseInt(e)},{cacheTime:50});return(0,n.Z)(r,1)[0]}(t);return o?(0,h.jsx)(lr,{sections:r,sheet:o,edit:!0,boatId:t}):(0,h.jsx)(lr,{sections:r,sheet:[],edit:!1,boatId:t})},fr=function(e){var r=e.boatId,t=(0,a.usePaginatedQuery)(cr.Z,{orderBy:{id:"asc"}}),o=(0,n.Z)(t,1)[0],i=o.sections,s=(o.hasMore,(0,u.useState)(!0));s[0],s[1];return i?(0,h.jsx)(u.Suspense,{fallback:(0,h.jsx)("p",{children:"Chargement Section Wrapper ..."}),children:(0,h.jsx)(dr,{sections:i,boatId:r})}):(0,h.jsx)("p",{children:"Pas de sections"})},pr=function(){var e=(0,o.useRouterQuery)();return(0,h.jsx)("main",{children:(0,h.jsx)(u.Suspense,{fallback:(0,h.jsx)("p",{children:"Chargement MainForm..."}),children:(0,h.jsx)(fr,{boatId:e.boatId})})})};pr.getLayout=function(e){return(0,h.jsx)(i.Z,{title:"Formulaire",children:e})};var gr=pr},5427:function(e,r,t){"use strict";var n=t(1428);r.Z=(0,n.buildRpcClient)({resolverName:"getSections",resolverType:"query",routePath:"/api/rpc/getSections"})},5388:function(e,r,t){"use strict";var n=t(1428);r.Z=(0,n.buildRpcClient)({resolverName:"createSheet",resolverType:"mutation",routePath:"/api/rpc/createSheet"})},4403:function(e,r,t){"use strict";var n=t(1428);r.Z=(0,n.buildRpcClient)({resolverName:"updateSheet",resolverType:"mutation",routePath:"/api/rpc/updateSheet"})},9977:function(e,r,t){"use strict";var n=t(1428);r.Z=(0,n.buildRpcClient)({resolverName:"getSheet",resolverType:"query",routePath:"/api/rpc/getSheet"})},7664:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/MainForm",function(){return t(6843)}])},4548:function(e){e.exports={footer:"footer_footer__2xi1A"}},5093:function(e){e.exports={container:"questions_container__2yG6-",arrowCorner:"questions_arrowCorner__3wmnH",content:"questions_content__Hs16x",scrollDiv:"questions_scrollDiv__Qf63K",sectionTitle:"questions_sectionTitle__1dLj7",contentList:"questions_contentList__T4I0b"}},1396:function(e){e.exports={div:"sectionOverview_div__1hXzK",sectionButton:"sectionOverview_sectionButton__VIymC"}}},function(e){e.O(0,[584,642,483,827,774,888,179],(function(){return r=7664,e(e.s=r);var r}));var r=e.O();_N_E=r}]);