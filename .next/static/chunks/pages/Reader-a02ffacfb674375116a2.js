(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[729],{4061:function(e,t,r){"use strict";var n=r(1428);t.Z=(0,n.buildRpcClient)({resolverName:"logout",resolverType:"mutation",routePath:"/api/rpc/logout"})},9375:function(e,t,r){"use strict";r.d(t,{h:function(){return x}});var n=r(809),a=r.n(n),o=r(266),i=r(6065),c=r(720),l=r.n(c),s=r(4061),u=r(2540),d=r(1428),h=r(3413),f=r(4753),p=r(1642),v=r(4065),b=r(7294),m=r(5893),x=function(e){var t=e.children,r=e.displayBackButton,n=void 0!==r&&r,c=(0,d.useMutation)(s.Z),x=(0,i.Z)(c,1)[0],g=(0,u.useRouter)(),y=t.length>1?"750px":"600px";console.log(y);var j=(0,v.a)("(min-width: ".concat(y,") and (max-width: 900px)")),_=(0,v.a)("(max-width: ".concat(y,")")),w=(0,b.useState)(!1),S=w[0],C=w[1];console.log({tabletScreen:j,phoneScreen:_});var N=b.Children.map(t,(function(e){return(0,b.isValidElement)(e)?(0,b.cloneElement)(e,{compact:j}):e}));return n&&!_&&N.push((0,b.cloneElement)((0,m.jsx)(h.z,{onClick:function(){return g.back()},children:"Retour"}),{compact:j})),console.log(t.length),_?(0,m.jsxs)("header",{className:l().header,children:[(0,m.jsx)("p",{children:"Formulaire"}),(0,m.jsxs)("div",{className:l().childrenDiv,children:[(0,m.jsx)(h.z,{compact:!0,onClick:function(){return g.back()},children:"Retour"}),(0,m.jsx)(f.O,{opened:S,onClick:function(){return C((function(e){return!e}))},title:"title"}),(0,m.jsx)(p.d,{position:"right",opened:S,onClose:function(){return C(!1)},title:"Vue d'ensemble",padding:"xl",overlayOpacity:.55,overlayBlur:3,children:(0,m.jsxs)("div",{className:l().drawer,children:[N,(0,m.jsx)("div",{}),(0,m.jsx)(h.z,{onClick:(0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:case"end":return e.stop()}}),e)}))),compact:j,children:"D\xe9connexion"})]})})]})]}):(0,m.jsxs)("header",{className:l().header,children:[(0,m.jsx)("p",{children:"Formulaire"}),(0,m.jsxs)("div",{className:l().childrenDiv,children:[N," | ",(0,m.jsx)(h.z,{onClick:(0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:case"end":return e.stop()}}),e)}))),compact:j,children:"D\xe9connexion"})]})]})}},6673:function(e,t,r){"use strict";r.d(t,{i:function(){return v}});var n=r(2809),a=r(7294),o=r(9521),i=r(233),c=r(7683),l=r.n(c),s=r(5893);function u(e){var t=e.preGlobalFilteredRows,r=e.globalFilter,n=e.setGlobalFilter,i=(e.searchValue,t.length),c=(0,a.useState)(r),u=c[0],d=c[1],h=(0,o.useAsyncDebounce)((function(e){n(e||void 0)}),200);return(0,s.jsx)("div",{className:l().searchDiv,children:(0,s.jsx)("input",{className:l().searchInput,value:u||"",onChange:function(e){d(e.target.value),h(e.target.value)},placeholder:"Rechercher dans ".concat(i," fiches")})})}function d(e){var t=e.column,r=t.filterValue,n=t.preFilteredRows,a=t.setFilter;n.length;return(0,s.jsx)("input",{value:r||"",onChange:function(e){a(e.target.value||void 0)},placeholder:"Rechercher"})}function h(e,t,r){return(0,i.default)(e,r,{keys:[function(e){return e.values[t]}]})}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}h.autoRemove=function(e){return!e};var v=function(e){var t=e.tableColumns,r=e.tableData,n=e.onRowClickFn,i=e.externalSearch,c=void 0===i?"":i,f=e.hideInternalSearch,v=void 0!==f&&f,b=e.sectionTitle;(0,a.useEffect)((function(){k(c)}),[c]),console.log({tableColumns:t,tableData:r,onRowClickFn:n,externalSearch:c,hideInternalSearch:v});var m=(0,a.useMemo)((function(){return r}),[r]),x=(0,a.useMemo)((function(){return t}),[]),g=(0,a.useMemo)((function(){return{fuzzyText:h,text:function(e,t,r){return e.filter((function(e){var n=e.values[t];return void 0===n||String(n).toLowerCase().startsWith(String(r).toLowerCase())}))}}}),[]),y=(0,a.useMemo)((function(){return{Filter:d}}),[]),j=(0,o.useTable)({columns:x,data:m,defaultColumn:y,filterTypes:g},o.useGlobalFilter,o.useSortBy),_=j.getTableProps,w=j.getTableBodyProps,S=j.headerGroups,C=j.rows,N=j.prepareRow,O=j.state,R=j.visibleColumns,T=j.preGlobalFilteredRows,k=j.setGlobalFilter;return 0===C.length&&v?(0,s.jsx)(s.Fragment,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:l().sectionTitle,children:b}),(0,s.jsxs)("table",p(p({className:l().table},_()),{},{cellSpacing:"0",children:[(0,s.jsxs)("thead",{children:[(0,s.jsx)("tr",{children:(0,s.jsx)("th",{className:!1===v?l().dashboardSearchDiv:"",colSpan:R.length,style:{textAlign:"left"},children:!v&&(0,s.jsx)(u,{preGlobalFilteredRows:T,globalFilter:O.globalFilter,setGlobalFilter:k})})}),!v&&(0,s.jsx)("tr",{children:(0,s.jsx)("th",{colSpan:R.length,style:{textAlign:"left",height:40}})}),S.map((function(e,t){return(0,s.jsx)("tr",p(p({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e,t){return(0,s.jsx)("th",p(p({className:l().th},e.getHeaderProps(e.getSortByToggleProps())),{},{children:e.render("Header")}),t)}))}),t)}))]}),(0,s.jsx)("tbody",p(p({className:l().tBody},w()),{},{children:C.map((function(e,t){return N(e),(0,s.jsx)("tr",p(p({className:v?l().tr:l().trMain},e.getRowProps()),{},{onClick:function(){n&&n(e.original.boatId)},children:e.cells.map((function(e,t){return(0,s.jsx)("td",p(p({className:l().td},e.getCellProps()),{},{children:e.render("Cell")}),t)}))}),t)}))}))]}))]})}},5429:function(e,t,r){"use strict";r.d(t,{_Y:function(){return n}});var n={OK:"OK",TEXT:"TEXT",NUMBER:"NUMBER",CLOSED:"CLOSED"}},3874:function(e,t,r){"use strict";var n=r(6065),a=(r(2540),r(1428)),o=r(9527),i=r(4061),c=r(5893),l=function(e){var t=e.title,r=e.children,l=(0,a.useMutation)(i.Z);(0,n.Z)(l,1)[0];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(o.Head,{children:[(0,c.jsx)("title",{children:t||"classemini"}),(0,c.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),r]})};l.authenticate={redirectTo:"/"},t.Z=l},9201:function(e,t,r){"use strict";r.r(t),r.d(t,{Reader:function(){return w},default:function(){return S}});var n=r(6065),a=r(7294),o=r(3874),i=r(2540),c=r(1428),l=(r(7305),r(3413)),s=r(9375),u=r(9977),d=r(7683),h=r.n(d),f=r(6673),p=r(5429),v=r(5893);function b(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw o}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function x(e){var t,r={},a=b(e);try{for(a.s();!(t=a.n()).done;){var o=(0,n.Z)(t.value,2),i=o[0],c=o[1];if(c instanceof Object&&!(c instanceof Date))r[c.get("id")?c.get("id"):i]=g(c);else r[i]=c}}catch(l){a.e(l)}finally{a.f()}return r}function g(e){var t,r=[],a=b(e);try{for(a.s();!(t=a.n()).done;){var o=(0,n.Z)(t.value,2),i=(o[0],o[1]);if(i instanceof Object&&!(i instanceof Date)){var c=x(i);r.push(c)}else r.push(i)}}catch(l){a.e(l)}finally{a.f()}return r}var y=function(e){var t=e.sheet,r=(e.onRowClickFn,(0,i.useRouter)(),(0,a.useMemo)((function(){var e,r=[],n=b(t.values());try{for(n.s();!(e=n.n()).done;){var a=x(e.value);r.push(a)}}catch(o){n.e(o)}finally{n.f()}return r}),[t])),n=(0,a.useState)(""),o=n[0],c=n[1];return(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:h().searchDiv,children:(0,v.jsx)("input",{className:h().searchInput,onChange:function(e){return c(e.target.value)},placeholder:"Rechercher"})}),r.map((function(e,t){return console.log({dataSection:e}),(0,v.jsx)("div",{children:(0,v.jsx)(f.i,{externalSearch:o,hideInternalSearch:!0,tableColumns:[{Header:"",accessor:"text"},{id:"answer",Header:"",accessor:function(e){return console.log({v:e}),e.answerType===p._Y.OK?e.answerType?"Oui":"Non":e.answer}}],tableData:e.question,sectionTitle:e.name})},t)}))]})};function j(e,t){return"object"===typeof t&&null!==t&&"Map"===t.dataType?new Map(t.value):t}var _=function(){var e=(0,i.useRouterQuery)(),t=(0,c.useQuery)(u.Z,{boatId:parseInt(e.boatId)},{cacheTime:100}),r=(0,n.Z)(t,2),o=r[0],l=(r[1].isSuccess,(0,a.useMemo)((function(){return JSON.parse(o.form,j)}),[]));return(0,v.jsx)(y,{sheet:l})},w=function(){var e=(0,i.useRouterQuery)(),t=(0,i.useRouter)();return(0,v.jsxs)("div",{children:[(0,v.jsx)(s.h,{displayBackButton:!0,children:(0,v.jsx)(l.z,{onClick:function(){return t.push("/MainForm?boatId=".concat(e.boatId))},children:"Editer"})}),(0,v.jsx)("main",{children:(0,v.jsx)(a.Suspense,{fallback:(0,v.jsx)("p",{children:"Chargement"}),children:(0,v.jsx)(_,{})})})]})};w.getLayout=function(e){return(0,v.jsx)(o.Z,{title:"Consuler",children:e})};var S=w},9977:function(e,t,r){"use strict";var n=r(1428);t.Z=(0,n.buildRpcClient)({resolverName:"getSheet",resolverType:"query",routePath:"/api/rpc/getSheet"})},7305:function(e,t,r){"use strict";var n=r(1428);t.Z=(0,n.buildRpcClient)({resolverName:"getSheets",resolverType:"query",routePath:"/api/rpc/getSheets"})},3717:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Reader",function(){return r(9201)}])},720:function(e){e.exports={header:"header_header__3m5QB",childrenDiv:"header_childrenDiv__1Qc7T",drawer:"header_drawer__1URdt"}},7683:function(e){e.exports={table:"table_table__1VsWa",tHead:"table_tHead__3EnNf",tr:"table_tr__2LyUn",trMain:"table_trMain__3VlzN",td:"table_td__3YyRk",tBody:"table_tBody__1aa-I",searchDiv:"table_searchDiv__1Ve5F",dashboardSearchDiv:"table_dashboardSearchDiv__8vBNv",searchInput:"table_searchInput__3y6BB",sectionTitle:"table_sectionTitle__eSXNM"}}},function(e){e.O(0,[642,695,774,888,179],(function(){return t=3717,e(e.s=t);var t}));var t=e.O();_N_E=t}]);